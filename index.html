<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Auto Palette</title>
  </head>
  <body>
    <div id="app"></div>
    <script type="module">
      import { from } from './src';

      const image = new Image();
      image.crossOrigin = 'Anonymous';
      // image.src = 'https://images.unsplash.com/photo-1667329829058-ac191ba4a905?ixlib=rb-4.0.3&dl=adam-bartoszewicz-vdkyWisomns-unsplash.jpg&w=640&q=80&fm=jpg&crop=entropy&cs=tinysrgb';
      image.src =
        'https://images.unsplash.com/photo-1550745165-9bc0b252726f?ixid=MnwxMjA3fDB8MXxzZWFyY2h8Nnx8Z2FtZXxlbnwwfHx8fDE2NzE4NjI3ODc&ixlib=rb-4.0.3&dpr=2&auto=format&fit=crop&w=120&h=200&q=60';
      // image.src = 'https://images.unsplash.com/photo-1586348943529-beaae6c28db9?ixlib=rb-4.0.3&dl=dave-hoefler-lsoogGC_5dg-unsplash.jpg&w=640&q=80&fm=jpg&crop=entropy&cs=tinysrgb';
      // image.src = 'https://images.unsplash.com/photo-1470114716159-e389f8712fda?ixlib=rb-4.0.3&dl=boris-smokrovic-HWwF4OnXAdM-unsplash.jpg&w=640&q=80&fm=jpg&crop=entropy&cs=tinysrgb';
      // image.src = 'https://images.unsplash.com/photo-1668741932680-5e8c88401bb4?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxjb2xsZWN0aW9uLXRodW1ibmFpbHx8aTNqNENKVVFSU1V8fGVufDB8fHx8&dpr=2&auto=format&fit=crop&w=294&q=60';

      console.time('palette');
      from(image)
        .build({ maxColors: 6 })
        .finally(() => console.timeEnd('palette'))
        .then((palette) => {
          const list = document.createElement('ul');
          list.style.display = 'flex';
          list.style.flexDirection = 'row';
          list.style.listStyle = 'none';

          palette.getColors().forEach((color) => {
            const item = document.createElement('li');
            item.style.backgroundColor = color.toString();
            item.style.height = '64px';
            item.style.color = color.isDark ? 'white' : 'black';
            item.innerText = color.toString();
            list.appendChild(item);
          });
          document.body.appendChild(list);
        });

      document.body.appendChild(image);
    </script>
  </body>
</html>
